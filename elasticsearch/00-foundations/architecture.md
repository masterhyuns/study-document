# ğŸ—ï¸ Elasticsearch ì•„í‚¤í…ì²˜ ì‹¬ì¸µ ë¶„ì„

## ğŸ“ ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Applications                    â”‚
â”‚         (Web Apps, Mobile Apps, Analytics Tools)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API (HTTP/HTTPS)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Load Balancer                          â”‚
â”‚                  (HAProxy, Nginx, AWS ELB)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Node 1  â”‚  â”‚  Node 2  â”‚  â”‚  Node 3  â”‚  â”‚  Node 4  â”‚
â”‚  Master  â”‚  â”‚   Data   â”‚  â”‚   Data   â”‚  â”‚  Ingest  â”‚
â”‚Eligible  â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚              â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Cluster Network
```

## ğŸ¯ ë…¸ë“œ ì—­í• ê³¼ ì±…ì„

### 1. Master Node (ë§ˆìŠ¤í„° ë…¸ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Master Node                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ê´€ë¦¬                  â”‚
â”‚ â€¢ ì¸ë±ìŠ¤ ìƒì„±/ì‚­ì œ                    â”‚
â”‚ â€¢ ìƒ¤ë“œ í• ë‹¹ ê²°ì •                      â”‚
â”‚ â€¢ ë…¸ë“œ ì¶”ê°€/ì œê±° ê°ì§€                 â”‚
â”‚ â€¢ í´ëŸ¬ìŠ¤í„° ë©”íƒ€ë°ì´í„° ê´€ë¦¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” ê¸°ëŠ¥:**
- **í´ëŸ¬ìŠ¤í„° ìƒíƒœ ê´€ë¦¬**: ì „ì²´ í´ëŸ¬ìŠ¤í„°ì˜ ë©”íƒ€ë°ì´í„°ì™€ ìƒíƒœ ì •ë³´ ìœ ì§€
- **ìƒ¤ë“œ í• ë‹¹**: ì–´ëŠ ë…¸ë“œì— ì–´ë–¤ ìƒ¤ë“œë¥¼ ë°°ì¹˜í• ì§€ ê²°ì •
- **ì¸ë±ìŠ¤ ê´€ë¦¬**: ì¸ë±ìŠ¤ ìƒì„±, ì‚­ì œ, ì„¤ì • ë³€ê²½ ì²˜ë¦¬

**ì„¤ì • ì˜ˆì‹œ:**
```yaml
node.roles: [ master ]
node.name: master-node-01
cluster.initial_master_nodes: ["master-node-01"]
```

### 2. Data Node (ë°ì´í„° ë…¸ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Data Node                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     Shard Storage                â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚ P0   â”‚  â”‚ R1   â”‚  â”‚ P2   â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚     Lucene Engine                â”‚ â”‚
â”‚ â”‚  â€¢ Indexing                      â”‚ â”‚
â”‚ â”‚  â€¢ Searching                     â”‚ â”‚
â”‚ â”‚  â€¢ Aggregations                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” ê¸°ëŠ¥:**
- **ë°ì´í„° ì €ì¥**: ì‹¤ì œ ë¬¸ì„œ ë°ì´í„°ì™€ ì¸ë±ìŠ¤ ì €ì¥
- **ê²€ìƒ‰ ì‹¤í–‰**: ì¿¼ë¦¬ ì²˜ë¦¬ ë° ê²°ê³¼ ë°˜í™˜
- **ì¸ë±ì‹±**: ìƒˆ ë¬¸ì„œ ìƒ‰ì¸ ë° ì—…ë°ì´íŠ¸

### 3. Ingest Node (ì¸ì œìŠ¤íŠ¸ ë…¸ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Ingest Node                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Raw Data â†’ Pipeline â†’ Indexed    â”‚
â”‚                                     â”‚
â”‚   Pipeline Processors:              â”‚
â”‚   â€¢ Grok (íŒ¨í„´ ë§¤ì¹­)                 â”‚
â”‚   â€¢ Date (ë‚ ì§œ íŒŒì‹±)                 â”‚
â”‚   â€¢ GeoIP (IP ìœ„ì¹˜ ë³€í™˜)             â”‚
â”‚   â€¢ Script (ìŠ¤í¬ë¦½íŠ¸ ì²˜ë¦¬)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì´í”„ë¼ì¸ ì˜ˆì‹œ:**
```json
{
  "description": "ë¡œê·¸ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": ["%{COMMONAPACHELOG}"]
      }
    },
    {
      "date": {
        "field": "timestamp",
        "formats": ["dd/MMM/yyyy:HH:mm:ss Z"]
      }
    },
    {
      "geoip": {
        "field": "client_ip"
      }
    }
  ]
}
```

### 4. Coordinating Node (ì½”ë””ë„¤ì´íŒ… ë…¸ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Coordinating Node             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Client Request                    â”‚
â”‚      â†“                              â”‚
â”‚   Route to Data Nodes               â”‚
â”‚      â†“                              â”‚
â”‚   Gather Results                    â”‚
â”‚      â†“                              â”‚
â”‚   Merge & Sort                      â”‚
â”‚      â†“                              â”‚
â”‚   Return to Client                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë°ì´í„° íë¦„

### ì¸ë±ì‹± í”„ë¡œì„¸ìŠ¤

```
1. Document Input
      â†“
2. Ingest Pipeline (Optional)
      â†“
3. Primary Shard Selection
      â†“
4. Document Indexing
      â†“
5. Replication to Replica Shards
      â†“
6. Refresh (Near Real-time Search)
      â†“
7. Flush & Commit (Durability)
```

### ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤

```
Query Request
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Query Phase               â”‚
â”‚   â€¢ ê° ìƒ¤ë“œì— ì¿¼ë¦¬ ì „ë‹¬       â”‚
â”‚   â€¢ ê´€ë ¨ ë¬¸ì„œ ID ìˆ˜ì§‘         â”‚
â”‚   â€¢ ìŠ¤ì½”ì–´ ê³„ì‚°              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Fetch Phase               â”‚
â”‚   â€¢ ì‹¤ì œ ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°        â”‚
â”‚   â€¢ ê²°ê³¼ ë³‘í•©                â”‚
â”‚   â€¢ ìµœì¢… ì •ë ¬                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         Response
```

## ğŸ’¾ ì €ì¥ êµ¬ì¡°

### Segment êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Lucene Index               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Segment 1                â”‚    â”‚
â”‚  â”‚  â€¢ Inverted Index             â”‚    â”‚
â”‚  â”‚  â€¢ Stored Fields              â”‚    â”‚
â”‚  â”‚  â€¢ Term Vectors               â”‚    â”‚
â”‚  â”‚  â€¢ Doc Values                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Segment 2                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Segment N                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Segment íŠ¹ì„±:**
- **ë¶ˆë³€ì„±**: í•œ ë²ˆ ìƒì„±ë˜ë©´ ìˆ˜ì • ë¶ˆê°€
- **ë³‘í•©**: ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‘ì€ ì„¸ê·¸ë¨¼íŠ¸ë“¤ì„ í° ê²ƒìœ¼ë¡œ ë³‘í•©
- **ì‚­ì œ**: ì‚­ì œ ë§ˆí‚¹ í›„ ë³‘í•© ì‹œ ì‹¤ì œ ì œê±°

### Translog (íŠ¸ëœì­ì…˜ ë¡œê·¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Write Operation              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Memory     â”‚
      â”‚   Buffer     â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Translog   â”‚ â† Durability
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Segment    â”‚ â† Searchable
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” í´ëŸ¬ìŠ¤í„° í†µì‹ 

### Discovery & Cluster Formation

```yaml
# elasticsearch.yml
discovery.seed_hosts:
  - node1.example.com
  - node2.example.com
  - node3.example.com

cluster.initial_master_nodes:
  - node-1
  - node-2
  - node-3

# Transport Layer Security
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
```

### ë…¸ë“œ ê°„ í†µì‹  í”„ë¡œí† ì½œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Transport Protocol         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Binary Protocol (Port 9300)     â”‚
â”‚  â€¢ Persistent Connections          â”‚
â”‚  â€¢ Compression Support             â”‚
â”‚  â€¢ TLS/SSL Encryption             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›ï¸ ìƒ¤ë“œ í• ë‹¹ ì „ëµ

### ìƒ¤ë“œ ë¶„ë°° ì•Œê³ ë¦¬ì¦˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Shard Allocation Decision      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Factors:                            â”‚
â”‚  â€¢ Disk Usage (< 85%)                â”‚
â”‚  â€¢ Node Load                         â”‚
â”‚  â€¢ Shard Count Balance               â”‚
â”‚  â€¢ Allocation Awareness              â”‚
â”‚  â€¢ Forced Awareness                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Allocation Awareness ì˜ˆì‹œ:**
```json
{
  "persistent": {
    "cluster.routing.allocation.awareness.attributes": "rack_id,zone",
    "cluster.routing.allocation.awareness.force.zone.values": "zone1,zone2"
  }
}
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™” ì•„í‚¤í…ì²˜

### ìºì‹± ê³„ì¸µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Caching Layers             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Node Query Cache                 â”‚
â”‚     â€¢ LRU Cache                      â”‚
â”‚     â€¢ 10% of Heap (default)          â”‚
â”‚                                      â”‚
â”‚  2. Shard Request Cache              â”‚
â”‚     â€¢ Result Cache                   â”‚
â”‚     â€¢ 1% of Heap (default)           â”‚
â”‚                                      â”‚
â”‚  3. Field Data Cache                 â”‚
â”‚     â€¢ In-memory Data Structure       â”‚
â”‚     â€¢ Unbounded (careful!)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Thread Pool êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Thread Pools                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  search:                             â”‚
â”‚    â€¢ threads: # of processors        â”‚
â”‚    â€¢ queue: 1000                     â”‚
â”‚                                      â”‚
â”‚  index:                              â”‚
â”‚    â€¢ threads: # of processors        â”‚
â”‚    â€¢ queue: 200                      â”‚
â”‚                                      â”‚
â”‚  bulk:                               â”‚
â”‚    â€¢ threads: # of processors        â”‚
â”‚    â€¢ queue: 50                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ê³ ê°€ìš©ì„± ì„¤ê³„

### Multi-Zone Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Availability Zone 1             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Master 1 â”‚  â”‚  Data 1  â”‚  â”‚  Data 2  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Availability Zone 2             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Master 2 â”‚  â”‚  Data 3  â”‚  â”‚  Data 4  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Availability Zone 3             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Master 3 â”‚  â”‚  Data 5  â”‚  â”‚  Data 6  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Split Brain Prevention

```yaml
# Minimum master nodes (deprecated in 7.x)
# discovery.zen.minimum_master_nodes: 2

# Modern approach (7.x+)
cluster.initial_master_nodes:
  - master-1
  - master-2
  - master-3

# Voting configuration
# Automatically managed in 7.x+
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸

### ì£¼ìš” ë©”íŠ¸ë¦­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Key Monitoring Metrics         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Cluster Level:                      â”‚
â”‚  â€¢ cluster.health                    â”‚
â”‚  â€¢ nodes.count                       â”‚
â”‚  â€¢ indices.count                     â”‚
â”‚  â€¢ shards.active                     â”‚
â”‚                                      â”‚
â”‚  Node Level:                         â”‚
â”‚  â€¢ cpu.percent                       â”‚
â”‚  â€¢ memory.used_percent               â”‚
â”‚  â€¢ disk.used_percent                 â”‚
â”‚  â€¢ thread_pool.rejected              â”‚
â”‚                                      â”‚
â”‚  Index Level:                        â”‚
â”‚  â€¢ indexing.index_rate               â”‚
â”‚  â€¢ search.query_rate                 â”‚
â”‚  â€¢ segments.count                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. ë…¸ë“œ êµ¬ì„±
- **ë§ˆìŠ¤í„° ë…¸ë“œ**: ìµœì†Œ 3ê°œ (í™€ìˆ˜ ê°œìˆ˜ ìœ ì§€)
- **ë°ì´í„° ë…¸ë“œ**: CPUì™€ ë©”ëª¨ë¦¬ë³´ë‹¤ ë””ìŠ¤í¬ ì¤‘ìš”
- **ì¸ì œìŠ¤íŠ¸ ë…¸ë“œ**: ë¬´ê±°ìš´ ì „ì²˜ë¦¬ ì‹œ ë³„ë„ êµ¬ì„±

### 2. ìƒ¤ë“œ ì„¤ê³„
- **Primary ìƒ¤ë“œ**: ì¸ë±ìŠ¤ ìƒì„± ì‹œ ê²°ì • (ë³€ê²½ ë¶ˆê°€)
- **Replica ìƒ¤ë“œ**: ë™ì  ì¡°ì • ê°€ëŠ¥
- **ìƒ¤ë“œ í¬ê¸°**: 20-40GB ê¶Œì¥

### 3. ë©”ëª¨ë¦¬ ì„¤ì •
```bash
# JVM Heap (ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ì˜ 50% ì´í•˜, ìµœëŒ€ 32GB)
export ES_JAVA_OPTS="-Xms16g -Xmx16g"

# ë‚˜ë¨¸ì§€ 50%ëŠ” OS íŒŒì¼ ì‹œìŠ¤í…œ ìºì‹œìš©
```

---

ğŸ’¡ **ë‹¤ìŒ ë‹¨ê³„**: [ìš©ì–´ ì‚¬ì „](./terminology.md)ì—ì„œ Elasticsearch í•µì‹¬ ìš©ì–´ë¥¼ í™•ì¸í•˜ì„¸ìš”!